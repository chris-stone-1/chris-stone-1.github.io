<html>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TLB2RVD');</script>
<!-- End Google Tag Manager -->

<style>
.plan {
  position: relative;
  top: 0;
  left: 0;
}
.Floor-Light {
  position: absolute;
  top: 0px;
  left: 530px;
}
.TV-Light {
  position: absolute;
  top: 0px;
  left: 60px;
}
.Bedroom-Light {
  position: absolute;
  top: 260px;
  left: 1080px;
}
.Hall-Light {
  position: absolute;
  top: 660px;
  left: 780px;
}

</style>

<body onload="floorLight();setInterval(floorLight, 3000)">

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TLB2RVD"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<!--<input id="floorstatus" type="button" value="Status" onclick="floorLight();" />-->
<!--<input id="toggle" type="button" value="Toggle" onclick="FloorLightToggle();" />-->
<!--<input id="flooron" type="button" value="On" onclick="FloorLightOn();" />-->
<!--<input id="flooroff" type="button" value="Off" onclick="FloorLightOff();" />-->

<img id="HomePlan" class="plan" src="https://i.imgur.com/TIm6keH.png"/>
<a href="#"> <img id="floorlightimage" class="Floor-Light" src="#" width="70px" onclick="FloorLightToggle()"> </a>
<a href="#"> <img id="tvlightimage" class="TV-Light" src="#" width="70px" onclick="TVLightToggle()"> </a>
<a href="#"> <img id="bedlightimage" class="Bedroom-Light" src="#" width="70px" onclick="BedLightToggle()"> </a>
<a href="#"> <img id="halllightimage" class="Hall-Light" src="#" width="70px" onclick="HallLightToggle()"> </a>


<script>

function floorlightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var floorlightstate = JSON.parse(xmlhttp.responseText.charAt(531));
	var floorlightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
	console.log(floorlightname + " - " + floorlightstate);
	tvLight();
        if(floorlightstate == 1) {document.getElementById("floorlightimage").src = "https://i.imgur.com/VQXqGfb.png";
	} else {document.getElementById("floorlightimage").src = "https://i.imgur.com/zfEhx5c.png";}}}}
function floorLight() {floorlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060DBBE88A3152BACFE50CFD62C39517F97D9E", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}

function FloorLightOnOff() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");}
function FloorLightOn() {FloorLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060DBBE88A3152BACFE50CFD62C39517F97D9E", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":1}}}" }}));floorLight();}
function FloorLightOff() {FloorLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060DBBE88A3152BACFE50CFD62C39517F97D9E", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":0}}}" }}));floorLight();}

function FloorLightToggle() {
floorLight();
function floorlightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var floorlightstate = JSON.parse(xmlhttp.responseText.charAt(531));
	var floorlightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
if (floorlightstate == 1) {FloorLightOff();
} else { FloorLightOn();}
function floorLight() {floorlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060DBBE88A3152BACFE50CFD62C39517F97D9E", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}}}
function floorLight() {floorlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060DBBE88A3152BACFE50CFD62C39517F97D9E", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}



function tvlightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var tvlightstate = xmlhttp.responseText.charAt(528);
	var tvlightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
	console.log(tvlightname + " - " + tvlightstate);
	bedLight();
        if(tvlightstate == 1) {document.getElementById("tvlightimage").src = "https://i.imgur.com/VQXqGfb.png";
	} else {document.getElementById("tvlightimage").src = "https://i.imgur.com/zfEhx5c.png";}}}}
function tvLight() {tvlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060C0E5A18C67585586D0CE010A8D817F851F7", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}

function TVLightOnOff() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");}
function TVLightOn() {TVLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060C0E5A18C67585586D0CE010A8D817F851F7", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":1}}}" }}));tvLight();}
function TVLightOff() {TVLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060C0E5A18C67585586D0CE010A8D817F851F7", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":0}}}" }}));tvLight();}

function TVLightToggle() {
tvLight();
function tvlightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var tvlightstate = xmlhttp.responseText.charAt(528);
	var tvlightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
if (tvlightstate == 1) {TVLightOff();
} else { TVLightOn();}
function tvLight() {tvlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060C0E5A18C67585586D0CE010A8D817F851F7", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}}}
function tvLight() {tvlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "80060C0E5A18C67585586D0CE010A8D817F851F7", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}



function bedlightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var bedlightstate = xmlhttp.responseText.charAt(533);
	var bedlightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
	console.log(bedlightname + " - " + bedlightstate);
	hallLight();
        if(bedlightstate == 1) {document.getElementById("bedlightimage").src = "https://i.imgur.com/VQXqGfb.png";
	} else {document.getElementById("bedlightimage").src = "https://i.imgur.com/zfEhx5c.png";}}}}
function bedLight() {bedlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006B50CE4ED89F198F4506D9DCFA86A17F9D5CC", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}

function BedLightOnOff() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");}
function BedLightOn() {BedLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006B50CE4ED89F198F4506D9DCFA86A17F9D5CC", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":1}}}" }}));bedLight();}
function BedLightOff() {BedLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006B50CE4ED89F198F4506D9DCFA86A17F9D5CC", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":0}}}" }}));bedLight();}

function BedLightToggle() {
bedLight();
function bedlightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var bedlightstate = xmlhttp.responseText.charAt(533);
	var bedlightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
if (bedlightstate == 1) {BedLightOff();
} else { BedLightOn();}
function bedLight() {bedlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006B50CE4ED89F198F4506D9DCFA86A17F9D5CC", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}}}
function bedLight() {bedlightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006B50CE4ED89F198F4506D9DCFA86A17F9D5CC", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}



function halllightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var halllightstate = xmlhttp.responseText.charAt(533);
	var halllightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
	console.log(halllightname + " - " + halllightstate);
        if(halllightstate == 1) {document.getElementById("halllightimage").src = "https://i.imgur.com/VQXqGfb.png";
	} else {document.getElementById("halllightimage").src = "https://i.imgur.com/zfEhx5c.png";}}}}
function hallLight() {halllightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006AC69D79A7CC13AF8AB59BADB794617F98793", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}

function HallLightOnOff() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");}
function HallLightOn() {HallLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006AC69D79A7CC13AF8AB59BADB794617F98793", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":1}}}" }}));hallLight();}
function HallLightOff() {HallLightOnOff(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006AC69D79A7CC13AF8AB59BADB794617F98793", "requestData": "{\"system\":{\"set_relay_state\":{\"state\":0}}}" }}));hallLight();}

function HallLightToggle() {
hallLight();
function halllightStatus() {
xmlhttp = new XMLHttpRequest();
var url = "https://eu-wap.tplinkcloud.com/?token=b9d3dd4e-B31nHYxu6iUeTbeFFlZn1lR";
xmlhttp.open("POST", url, true);
xmlhttp.setRequestHeader("Content-type", "application/json");
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
	var halllightstate = xmlhttp.responseText.charAt(533);
	var halllightname=xmlhttp.responseText.substring(xmlhttp.responseText.lastIndexOf("\"alias\\\":\\\"")+11,xmlhttp.responseText.lastIndexOf("\\\",\\\"dev_name"));
if (halllightstate == 1) {HallLightOff();
} else { HallLightOn();}
function hallLight() {halllightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006AC69D79A7CC13AF8AB59BADB794617F98793", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}}}
function hallLight() {halllightStatus(); xmlhttp.send(JSON.stringify({"method":"passthrough", "params": {"deviceId": "8006AC69D79A7CC13AF8AB59BADB794617F98793", "requestData": "{\"system\":{\"get_sysinfo\":null},\"emeter\":{\"get_realtime\":null}}" }}));}}





</script>

</html>